{"ast":null,"code":"import _regeneratorRuntime from \"G:\\\\GitRepos\\\\ecommerce_app\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"G:\\\\GitRepos\\\\ecommerce_app\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"G:\\\\GitRepos\\\\ecommerce_app\\\\client\\\\src\\\\App.js\";\nimport './App.css';\nimport { useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport NavHeader from './Pages/Components/nav/nav';\nimport Header from './Pages/Components/header/header';\nimport Products from './Pages/products/products';\nimport Cart from './Pages/cart/cart';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Services from './api/apiCalls';\nimport { initCart, addToCart, loadProducts } from './api/state';\nimport AddProduct from './Pages/addProduct/addProduct';\nimport Login from './Pages/login/login';\n\nfunction App() {\n  //setup reducer and state\n  var _useSelector = useSelector(function (state) {\n    return state.userState;\n  }),\n      products = _useSelector.products,\n      cart = _useSelector.cart;\n\n  var dispatch = useDispatch();\n  var ProdServInst = new Services(); //Setup session storage only runs once\n\n  useEffect(function () {\n    var isNew = sessionStorage.getItem('isNew');\n\n    if (isNew !== 'true') {\n      sessionStorage.setItem('isNew', true);\n      sessionStorage.setItem('cartData', JSON.stringify([]));\n      sessionStorage.setItem('session', '');\n    }\n  }, []); //effect to load in all products from database\n\n  useEffect(function () {\n    function fetchProducts() {\n      return _fetchProducts.apply(this, arguments);\n    }\n\n    function _fetchProducts() {\n      _fetchProducts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return ProdServInst.getAllProducts();\n\n              case 2:\n                response = _context.sent;\n                dispatch(loadProducts(response));\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _fetchProducts.apply(this, arguments);\n    }\n\n    function loadCart() {\n      var cartData = JSON.parse(sessionStorage.getItem('cartData'));\n\n      if (cartData.length > 0 && cart.length === 0) {\n        dispatch(initCart(cartData));\n      }\n    }\n\n    loadCart();\n    fetchProducts();\n  }, []); //loading the session storage from state\n\n  useEffect(function () {\n    if (cart.length > 0) {}\n  }, [cart]);\n\n  var handleAddToCart = function handleAddToCart(item) {\n    //console.log(item)\n    var foundItem = cart.find(function (element) {\n      return element.id === item.id;\n    });\n\n    if (!foundItem) {\n      dispatch(addToCart(item));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NavHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Routes, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    element: /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 34\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/products\",\n    element: /*#__PURE__*/React.createElement(Products, {\n      products: products,\n      onClick: handleAddToCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 20\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/checkout\",\n    element: /*#__PURE__*/React.createElement(Cart, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 42\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/addprod\",\n    element: /*#__PURE__*/React.createElement(AddProduct, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 41\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/login\",\n    element: /*#__PURE__*/React.createElement(Login, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 39\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"names":["useEffect","BrowserRouter","Router","Routes","Route","NavHeader","Header","Products","Cart","useDispatch","useSelector","Services","initCart","addToCart","loadProducts","AddProduct","Login","App","state","userState","products","cart","dispatch","ProdServInst","isNew","sessionStorage","getItem","setItem","JSON","stringify","fetchProducts","getAllProducts","response","loadCart","cartData","parse","length","handleAddToCart","item","foundItem","find","element","id"],"sources":["G:/GitRepos/ecommerce_app/client/src/App.js"],"sourcesContent":["import './App.css'\r\nimport { useEffect } from 'react'\r\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom'\r\nimport NavHeader from './Pages/Components/nav/nav'\r\nimport Header from './Pages/Components/header/header'\r\nimport Products from './Pages/products/products'\r\nimport Cart from './Pages/cart/cart'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Services from './api/apiCalls'\r\nimport { initCart, addToCart, loadProducts } from './api/state'\r\nimport AddProduct from './Pages/addProduct/addProduct'\r\nimport Login from './Pages/login/login'\r\n\r\nfunction App() {\r\n  //setup reducer and state\r\n  const { products, cart } = useSelector((state) => state.userState)\r\n  const dispatch = useDispatch()\r\n  const ProdServInst = new Services()\r\n\r\n  //Setup session storage only runs once\r\n  useEffect(() => {\r\n    const isNew = sessionStorage.getItem('isNew')\r\n    if (isNew !== 'true') {\r\n      sessionStorage.setItem('isNew', true)\r\n      sessionStorage.setItem('cartData', JSON.stringify([]))\r\n      sessionStorage.setItem('session', '')\r\n    }\r\n  }, [])\r\n\r\n  //effect to load in all products from database\r\n  useEffect(() => {\r\n    async function fetchProducts() {\r\n      const response = await ProdServInst.getAllProducts()\r\n      dispatch(loadProducts(response))\r\n    }\r\n    function loadCart() {\r\n      const cartData = JSON.parse(sessionStorage.getItem('cartData'))\r\n      if (cartData.length > 0 && cart.length === 0) {\r\n        dispatch(initCart(cartData))\r\n      }\r\n    }\r\n    loadCart()\r\n    fetchProducts()\r\n  }, [])\r\n\r\n  //loading the session storage from state\r\n  useEffect(() => {\r\n    if (cart.length > 0) {\r\n\r\n    }\r\n  }, [cart])\r\n\r\n  const handleAddToCart = (item) => {\r\n    //console.log(item)\r\n    const foundItem = cart.find(element => element.id === item.id)\r\n    if(!foundItem){\r\n       dispatch(addToCart(item))\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <Router>\r\n      <NavHeader />\r\n      <Routes>\r\n        <Route path=\"/\" element={<Header />} />\r\n        <Route\r\n          path=\"/products\"\r\n          element={<Products products={products} onClick={handleAddToCart} />}\r\n        />\r\n        <Route path=\"/checkout\" element={<Cart />} />\r\n        <Route path=\"/addprod\" element={<AddProduct />} />\r\n        <Route path=\"/login\" element={<Login />} />\r\n      </Routes>\r\n    </Router>\r\n  )\r\n}\r\n\r\nexport default App\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}