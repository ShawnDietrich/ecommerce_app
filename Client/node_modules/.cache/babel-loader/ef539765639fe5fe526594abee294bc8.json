{"ast":null,"code":"var _jsxFileName = \"G:\\\\GitRepos\\\\ecommerce_app\\\\client\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport { useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport NavHeader from './Pages/Components/nav/nav';\nimport Header from './Pages/Components/header/header';\nimport Products from './Pages/products/products';\nimport Cart from './Pages/cart/cart';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Services from './api/apiCalls';\nimport { initCart, addToCart, loadProducts } from './api/state';\nimport AddProduct from './Pages/addProduct/addProduct';\nimport Login from './Pages/login/login';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  //setup reducer and state\n  const {\n    products,\n    cart\n  } = useSelector(state => state.userState);\n  const dispatch = useDispatch();\n  const ProdServInst = new Services(); //Setup session storage only runs once\n\n  useEffect(() => {\n    const isNew = sessionStorage.getItem('isNew');\n\n    if (isNew !== 'true') {\n      sessionStorage.setItem('isNew', true);\n      sessionStorage.setItem('cartData', JSON.stringify([]));\n      sessionStorage.setItem('session', '');\n    }\n  }, []); //effect to load in all products from database\n\n  useEffect(() => {\n    async function fetchProducts() {\n      const response = await ProdServInst.getAllProducts();\n      dispatch(loadProducts(response));\n    }\n\n    function loadCart() {\n      const cartData = JSON.parse(sessionStorage.getItem('cartData'));\n\n      if (cartData.length > 0 && cart.length === 0) {\n        dispatch(initCart(cartData));\n      }\n    }\n\n    loadCart();\n    fetchProducts();\n  }, []); //loading the session storage from state\n\n  useEffect(() => {\n    if (cart.length > 0) {}\n  }, [cart]);\n\n  const handleAddToCart = item => {\n    //console.log(item)\n    const foundItem = cart.find(element => element.id === item.id);\n\n    if (!foundItem) {\n      dispatch(addToCart(item));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: [/*#__PURE__*/_jsxDEV(NavHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/products\",\n        element: /*#__PURE__*/_jsxDEV(Products, {\n          products: products,\n          onClick: handleAddToCart\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/checkout\",\n        element: /*#__PURE__*/_jsxDEV(Cart, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 42\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/addprod\",\n        element: /*#__PURE__*/_jsxDEV(AddProduct, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        element: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 39\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"wX/EyGH+zdgrrE1DNbqWdDcGTHs=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","BrowserRouter","Router","Routes","Route","NavHeader","Header","Products","Cart","useDispatch","useSelector","Services","initCart","addToCart","loadProducts","AddProduct","Login","App","products","cart","state","userState","dispatch","ProdServInst","isNew","sessionStorage","getItem","setItem","JSON","stringify","fetchProducts","response","getAllProducts","loadCart","cartData","parse","length","handleAddToCart","item","foundItem","find","element","id"],"sources":["G:/GitRepos/ecommerce_app/client/src/App.js"],"sourcesContent":["import './App.css'\r\nimport { useEffect } from 'react'\r\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom'\r\nimport NavHeader from './Pages/Components/nav/nav'\r\nimport Header from './Pages/Components/header/header'\r\nimport Products from './Pages/products/products'\r\nimport Cart from './Pages/cart/cart'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Services from './api/apiCalls'\r\nimport { initCart, addToCart, loadProducts } from './api/state'\r\nimport AddProduct from './Pages/addProduct/addProduct'\r\nimport Login from './Pages/login/login'\r\n\r\nfunction App() {\r\n  //setup reducer and state\r\n  const { products, cart } = useSelector((state) => state.userState)\r\n  const dispatch = useDispatch()\r\n  const ProdServInst = new Services()\r\n\r\n  //Setup session storage only runs once\r\n  useEffect(() => {\r\n    const isNew = sessionStorage.getItem('isNew')\r\n    if (isNew !== 'true') {\r\n      sessionStorage.setItem('isNew', true)\r\n      sessionStorage.setItem('cartData', JSON.stringify([]))\r\n      sessionStorage.setItem('session', '')\r\n    }\r\n  }, [])\r\n\r\n  //effect to load in all products from database\r\n  useEffect(() => {\r\n    async function fetchProducts() {\r\n      const response = await ProdServInst.getAllProducts()\r\n      dispatch(loadProducts(response))\r\n    }\r\n    function loadCart() {\r\n      const cartData = JSON.parse(sessionStorage.getItem('cartData'))\r\n      if (cartData.length > 0 && cart.length === 0) {\r\n        dispatch(initCart(cartData))\r\n      }\r\n    }\r\n    loadCart()\r\n    fetchProducts()\r\n  }, [])\r\n\r\n  //loading the session storage from state\r\n  useEffect(() => {\r\n    if (cart.length > 0) {\r\n\r\n    }\r\n  }, [cart])\r\n\r\n  const handleAddToCart = (item) => {\r\n    //console.log(item)\r\n    const foundItem = cart.find(element => element.id === item.id)\r\n    if(!foundItem){\r\n       dispatch(addToCart(item))\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <Router>\r\n      <NavHeader />\r\n      <Routes>\r\n        <Route path=\"/\" element={<Header />} />\r\n        <Route\r\n          path=\"/products\"\r\n          element={<Products products={products} onClick={handleAddToCart} />}\r\n        />\r\n        <Route path=\"/checkout\" element={<Cart />} />\r\n        <Route path=\"/addprod\" element={<AddProduct />} />\r\n        <Route path=\"/login\" element={<Login />} />\r\n      </Routes>\r\n    </Router>\r\n  )\r\n}\r\n\r\nexport default App\r\n"],"mappings":";;;AAAA,OAAO,WAAP;AACA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,aAAa,IAAIC,MAA1B,EAAkCC,MAAlC,EAA0CC,KAA1C,QAAuD,kBAAvD;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,MAAP,MAAmB,kCAAnB;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,YAA9B,QAAkD,aAAlD;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;;;AAEA,SAASC,GAAT,GAAe;EAAA;;EACb;EACA,MAAM;IAAEC,QAAF;IAAYC;EAAZ,IAAqBT,WAAW,CAAEU,KAAD,IAAWA,KAAK,CAACC,SAAlB,CAAtC;EACA,MAAMC,QAAQ,GAAGb,WAAW,EAA5B;EACA,MAAMc,YAAY,GAAG,IAAIZ,QAAJ,EAArB,CAJa,CAMb;;EACAX,SAAS,CAAC,MAAM;IACd,MAAMwB,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAd;;IACA,IAAIF,KAAK,KAAK,MAAd,EAAsB;MACpBC,cAAc,CAACE,OAAf,CAAuB,OAAvB,EAAgC,IAAhC;MACAF,cAAc,CAACE,OAAf,CAAuB,UAAvB,EAAmCC,IAAI,CAACC,SAAL,CAAe,EAAf,CAAnC;MACAJ,cAAc,CAACE,OAAf,CAAuB,SAAvB,EAAkC,EAAlC;IACD;EACF,CAPQ,EAON,EAPM,CAAT,CAPa,CAgBb;;EACA3B,SAAS,CAAC,MAAM;IACd,eAAe8B,aAAf,GAA+B;MAC7B,MAAMC,QAAQ,GAAG,MAAMR,YAAY,CAACS,cAAb,EAAvB;MACAV,QAAQ,CAACR,YAAY,CAACiB,QAAD,CAAb,CAAR;IACD;;IACD,SAASE,QAAT,GAAoB;MAClB,MAAMC,QAAQ,GAAGN,IAAI,CAACO,KAAL,CAAWV,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAX,CAAjB;;MACA,IAAIQ,QAAQ,CAACE,MAAT,GAAkB,CAAlB,IAAuBjB,IAAI,CAACiB,MAAL,KAAgB,CAA3C,EAA8C;QAC5Cd,QAAQ,CAACV,QAAQ,CAACsB,QAAD,CAAT,CAAR;MACD;IACF;;IACDD,QAAQ;IACRH,aAAa;EACd,CAbQ,EAaN,EAbM,CAAT,CAjBa,CAgCb;;EACA9B,SAAS,CAAC,MAAM;IACd,IAAImB,IAAI,CAACiB,MAAL,GAAc,CAAlB,EAAqB,CAEpB;EACF,CAJQ,EAIN,CAACjB,IAAD,CAJM,CAAT;;EAMA,MAAMkB,eAAe,GAAIC,IAAD,IAAU;IAChC;IACA,MAAMC,SAAS,GAAGpB,IAAI,CAACqB,IAAL,CAAUC,OAAO,IAAIA,OAAO,CAACC,EAAR,KAAeJ,IAAI,CAACI,EAAzC,CAAlB;;IACA,IAAG,CAACH,SAAJ,EAAc;MACXjB,QAAQ,CAACT,SAAS,CAACyB,IAAD,CAAV,CAAR;IACF;EACF,CAND;;EASA,oBACE,QAAC,MAAD;IAAA,wBACE,QAAC,SAAD;MAAA;MAAA;MAAA;IAAA,QADF,eAEE,QAAC,MAAD;MAAA,wBACE,QAAC,KAAD;QAAO,IAAI,EAAC,GAAZ;QAAgB,OAAO,eAAE,QAAC,MAAD;UAAA;UAAA;UAAA;QAAA;MAAzB;QAAA;QAAA;QAAA;MAAA,QADF,eAEE,QAAC,KAAD;QACE,IAAI,EAAC,WADP;QAEE,OAAO,eAAE,QAAC,QAAD;UAAU,QAAQ,EAAEpB,QAApB;UAA8B,OAAO,EAAEmB;QAAvC;UAAA;UAAA;UAAA;QAAA;MAFX;QAAA;QAAA;QAAA;MAAA,QAFF,eAME,QAAC,KAAD;QAAO,IAAI,EAAC,WAAZ;QAAwB,OAAO,eAAE,QAAC,IAAD;UAAA;UAAA;UAAA;QAAA;MAAjC;QAAA;QAAA;QAAA;MAAA,QANF,eAOE,QAAC,KAAD;QAAO,IAAI,EAAC,UAAZ;QAAuB,OAAO,eAAE,QAAC,UAAD;UAAA;UAAA;UAAA;QAAA;MAAhC;QAAA;QAAA;QAAA;MAAA,QAPF,eAQE,QAAC,KAAD;QAAO,IAAI,EAAC,QAAZ;QAAqB,OAAO,eAAE,QAAC,KAAD;UAAA;UAAA;UAAA;QAAA;MAA9B;QAAA;QAAA;QAAA;MAAA,QARF;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAeD;;GA/DQpB,G;UAEoBP,W,EACVD,W;;;KAHVQ,G;AAiET,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}